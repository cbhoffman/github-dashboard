{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FetchPullRequestData=/*#__PURE__*/function(_React$Component){_inherits(FetchPullRequestData,_React$Component);var _super=_createSuper(FetchPullRequestData);function FetchPullRequestData(){var _this;_classCallCheck(this,FetchPullRequestData);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,repo:null,created:null,closed:null,average:null,closedNoMerge:null};return _this;}_createClass(FetchPullRequestData,[{key:\"getAverageOpenTime\",value:function getAverageOpenTime(pullRequests){function getDifference(created,closed){var createDate=new Date(created);var closedDate=new Date(closed);var diffTime=Math.abs(closedDate-createDate);var diffDays=Math.ceil(diffTime/(1000*60*60*24));return diffDays;}function calculateAverage(array){var total=0;var count=0;array.forEach(function(item,index){total+=item;count++;});var result=total/count;return result.toFixed(2);}var newArr=[];pullRequests.forEach(function(pr){var daysOpen=getDifference(pr.created_at,pr.closed_at);newArr.push(daysOpen);});return calculateAverage(newArr);}},{key:\"getClosedPRsNoMerge\",value:function getClosedPRsNoMerge(pullRequests){var noMergeCount=0;pullRequests.forEach(function(pr){if(pr.pull_request.merged_at===null){noMergeCount++;}});return noMergeCount;}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,createdData,url2,response2,closedData,numberOfClosed,numberOfCreated,averageOpenTime,closedNoMerge;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://api.github.com/search/issues?q=repo:nationwide-building-society/\".concat(this.props.repo,\"+is:pr+created:\").concat(this.props.start,\"..\").concat(this.props.end,\"&per_page=100\");_context.next=3;return fetch(url,{method:\"GET\",headers:{Authorization:\"token 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\"}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:createdData=_context.sent;url2=\"https://api.github.com/search/issues?q=repo:nationwide-building-society/\".concat(this.props.repo,\"+is:pr+closed:\").concat(this.props.start,\"..\").concat(this.props.end,\"&per_page=100\");_context.next=10;return fetch(url2,{method:\"GET\",headers:{Authorization:\"token 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\"}});case 10:response2=_context.sent;_context.next=13;return response2.json();case 13:closedData=_context.sent;numberOfClosed=closedData.total_count;numberOfCreated=createdData.total_count;averageOpenTime=this.getAverageOpenTime(closedData.items);closedNoMerge=this.getClosedPRsNoMerge(closedData.items);this.setState({repo:this.props.repo,created:numberOfCreated,closed:numberOfClosed,average:averageOpenTime,closedNoMerge:closedNoMerge,loading:false});case 19:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var divStyle={'list-style':'none'};return/*#__PURE__*/_jsx(\"div\",{children:this.state.loading||!this.state.created||!this.state.closed||!this.state.repo?/*#__PURE__*/_jsx(\"div\",{children:\"loading...\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4\",children:this.state.repo}),/*#__PURE__*/_jsxs(\"ul\",{style:divStyle,children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Number of created Pull Requests : \",this.state.created]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Number of closed Pull Requests : \",this.state.closed]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Average PR wait time (in open state) : \",this.state.average,\" \",this.state.average==1?'day':'days']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"PRs closed without merge : \",this.state.closedNoMerge]})]})]})});}}]);return FetchPullRequestData;}(React.Component);export{FetchPullRequestData as default};","map":{"version":3,"names":["React","FetchPullRequestData","state","loading","repo","created","closed","average","closedNoMerge","pullRequests","getDifference","createDate","Date","closedDate","diffTime","Math","abs","diffDays","ceil","calculateAverage","array","total","count","forEach","item","index","result","toFixed","newArr","pr","daysOpen","created_at","closed_at","push","noMergeCount","pull_request","merged_at","url","props","start","end","fetch","method","headers","Authorization","response","json","createdData","url2","response2","closedData","numberOfClosed","total_count","numberOfCreated","averageOpenTime","getAverageOpenTime","items","getClosedPRsNoMerge","setState","divStyle","Component"],"sources":["/Users/Caleb.Hoffman/Desktop/training/my-app/src/FetchPullRequestData.js"],"sourcesContent":["import React from \"react\";\n\nexport default class FetchPullRequestData extends React.Component {\n    state = {\n        loading : true,\n        repo: null,\n        created: null, \n        closed: null, \n        average: null, \n        closedNoMerge: null, \n    };\n\n    getAverageOpenTime(pullRequests){\n        function getDifference(created, closed){\n            const createDate = new Date(created);\n            const closedDate = new Date(closed);\n            const diffTime = Math.abs(closedDate - createDate);\n            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); \n    \n            return diffDays;\n        }\n\n        function calculateAverage(array) {\n            var total = 0;\n            var count = 0;\n    \n            array.forEach(function(item, index){\n                total += item;\n                count++;\n            });\n    \n            var result = total/count;\n    \n    \n            return result.toFixed(2);\n        } \n\n        var newArr = [];\n        pullRequests.forEach(pr => {\n            var daysOpen = getDifference(pr.created_at, pr.closed_at);\n            newArr.push(daysOpen);\n        });\n        \n        return calculateAverage(newArr);\n    }    \n    \n    getClosedPRsNoMerge(pullRequests){\n        var noMergeCount = 0;\n        pullRequests.forEach(pr => {\n            if (pr.pull_request.merged_at === null){\n                noMergeCount++;\n            }\n        });\n    \n        return noMergeCount;\n    }\n    \n    async componentDidMount(){\n        const url = `https://api.github.com/search/issues?q=repo:nationwide-building-society/${this.props.repo}+is:pr+created:${this.props.start}..${this.props.end}&per_page=100`;\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                Authorization: `token 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`\n            }\n        });\n        const createdData = await response.json();\n\n        const url2 = `https://api.github.com/search/issues?q=repo:nationwide-building-society/${this.props.repo}+is:pr+closed:${this.props.start}..${this.props.end}&per_page=100`;\n        const response2 = await fetch(url2, {\n            method: \"GET\",\n            headers: {\n                Authorization: `token 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`\n            }\n        });\n        const closedData = await response2.json();\n\n        const numberOfClosed = closedData.total_count;\n        const numberOfCreated = createdData.total_count;\n        const averageOpenTime = this.getAverageOpenTime(closedData.items);\n        const closedNoMerge = this.getClosedPRsNoMerge(closedData.items);\n        \n        this.setState({\n            repo: this.props.repo,\n            created: numberOfCreated, \n            closed: numberOfClosed, \n            average: averageOpenTime, \n            closedNoMerge: closedNoMerge, \n            loading :false\n        })\n    }\n\n    render() {\n        const divStyle = {\n            'list-style': 'none'\n          };\n\n        return (\n            <div>\n                {this.state.loading || !this.state.created || !this.state.closed || !this.state.repo? <div>loading...</div> : \n                <div>\n                    <h3 className=\"mb-4\">{this.state.repo}</h3>\n                    <ul style={divStyle}>\n                        <li>Number of created Pull Requests : {this.state.created}</li>\n                        <li>Number of closed Pull Requests : {this.state.closed}</li>\n                        <li>Average PR wait time (in open state) : {this.state.average} {this.state.average == 1 ? 'day' : 'days'}</li>\n                        <li>PRs closed without merge : {this.state.closedNoMerge}</li>\n                    </ul>\n                </div>\n                }\n            </div>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
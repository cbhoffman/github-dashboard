{"ast":null,"code":"var _jsxFileName = \"/Users/Caleb.Hoffman/Desktop/training/my-app/src/Display.js\";\nimport React, { useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Display(start, end, repos, token) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"summary\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Pull Request Activity from \", moment(start).format(\"LL\"), \" to\", \" \", \" \", moment(end).format(\"LL\"), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: repos.forEach(repo => {\n        gatherData(repo, start, end, token).then(res => {\n          console.log(res);\n          displayData(res);\n        });\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 15\n  }, this);\n}\n\n_c = Display;\n\nasync function getClosedPullRequestInformation(repo, start, end, token) {\n  const response = await fetch(`https://api.github.com/search/issues?q=repo:nationwide-building-society/${repo}+is:pr+closed:${start}..${end}&per_page=100`, {\n    method: \"GET\",\n    headers: {\n      Authorization: `token ${token}`\n    }\n  });\n  const result = await response.json().then(result => {\n    return result;\n  });\n  return result;\n}\n\nasync function getCreatedPullRequestInformation(repo, start, end, token) {\n  const response = await fetch(`https://api.github.com/search/issues?q=repo:nationwide-building-society/${repo}+is:pr+created:${start}..${end}&per_page=100`, {\n    method: \"GET\",\n    headers: {\n      Authorization: `token ${token}`\n    }\n  });\n  const result = await response.json().then(result => {\n    return result;\n  });\n  return result;\n}\n\nfunction getDifference(created, closed) {\n  const createDate = new Date(created);\n  const closedDate = new Date(closed);\n  const diffTime = Math.abs(closedDate - createDate);\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  return diffDays;\n}\n\nfunction calculateAverage(array) {\n  var total = 0;\n  var count = 0;\n  array.forEach(function (item, index) {\n    total += item;\n    count++;\n  });\n  var result = total / count;\n  return result.toFixed(2);\n}\n\nfunction getAverageOpenTime(pullRequests) {\n  var newArr = [];\n  pullRequests.forEach(pr => {\n    var daysOpen = getDifference(pr.created_at, pr.closed_at);\n    newArr.push(daysOpen);\n  });\n  return calculateAverage(newArr);\n}\n\nfunction getClosedPRsNoMerge(pullRequests) {\n  var noMergeCount = 0;\n  pullRequests.forEach(pr => {\n    if (pr.pull_request.merged_at === null) {\n      noMergeCount++;\n    }\n  });\n  return noMergeCount;\n}\n\nasync function gatherData(repo, start, end, token) {\n  var closedInfo = await getClosedPullRequestInformation(repo, start, end, token);\n  var createdInfo = await getCreatedPullRequestInformation(repo, start, end, token);\n  var averageOpenTime = getAverageOpenTime(closedInfo.items);\n  var closedNoMerge = getClosedPRsNoMerge(closedInfo.items); //accumulate data and put into custom data object to return and display\n\n  var arr = {\n    name: repo,\n    createdInfo: createdInfo,\n    closedInfo: closedInfo,\n    averageOpenTime: `${averageOpenTime} ${+averageOpenTime == 1 ? 'day' : 'days'}`,\n    closedNoMerge: closedNoMerge\n  };\n  return arr;\n}\n\nasync function displayData(data) {\n  let title = document.getElementById('active_pr_title');\n  title.innerText = `Pull Request Activity from ${startDate} to ${endDate}`;\n  let div = document.getElementById('reposData');\n  let header = document.createElement('h3');\n  header.classList.add('text-center');\n  header.classList.add('mt-5');\n  header.innerText = data.name;\n  div.appendChild(header);\n  let ul = document.createElement('ul');\n  document.body.appendChild(ul);\n  ul.setAttribute(\"id\", data.name + \"-prs\");\n  let closeNumber = document.createElement('li');\n  closeNumber.classList.add('text-center', 'list-group-item');\n  closeNumber.innerText = `Number closed between ${startDate} and ${endDate} : ${data.closedInfo.total_count}`;\n  ul.appendChild(closeNumber);\n  let createdNumber = document.createElement('li');\n  createdNumber.classList.add('text-center', 'list-group-item');\n  createdNumber.innerText = `Number created between ${startDate} and ${endDate} : ${data.createdInfo.total_count}`;\n  ul.appendChild(createdNumber); //Average days open for pull requests\n\n  let averageOpenTime = document.createElement('li');\n  averageOpenTime.classList.add('text-center', 'list-group-item');\n  averageOpenTime.innerText = `Average PR wait time (in open state) : ${data.averageOpenTime}`;\n  ul.appendChild(averageOpenTime); //PRs closed without merge\n\n  let closedNoMerge = document.createElement('li');\n  closedNoMerge.classList.add('text-center', 'list-group-item');\n  closedNoMerge.innerText = `PRs closed without merge : ${data.closedNoMerge}`;\n  ul.appendChild(closedNoMerge);\n  div.appendChild(ul);\n}\n\nexport default Display;\n\nvar _c;\n\n$RefreshReg$(_c, \"Display\");","map":{"version":3,"names":["React","useState","DatePicker","moment","Display","start","end","repos","token","format","forEach","repo","gatherData","then","res","console","log","displayData","getClosedPullRequestInformation","response","fetch","method","headers","Authorization","result","json","getCreatedPullRequestInformation","getDifference","created","closed","createDate","Date","closedDate","diffTime","Math","abs","diffDays","ceil","calculateAverage","array","total","count","item","index","toFixed","getAverageOpenTime","pullRequests","newArr","pr","daysOpen","created_at","closed_at","push","getClosedPRsNoMerge","noMergeCount","pull_request","merged_at","closedInfo","createdInfo","averageOpenTime","items","closedNoMerge","arr","name","data","title","document","getElementById","innerText","startDate","endDate","div","header","createElement","classList","add","appendChild","ul","body","setAttribute","closeNumber","total_count","createdNumber"],"sources":["/Users/Caleb.Hoffman/Desktop/training/my-app/src/Display.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport moment from \"moment\";\n\nfunction Display(start, end, repos, token){\n  \n\n    return (  <div className=\"summary\">\n    <p>\n    Pull Request Activity from {moment(start).format(\"LL\")} to{\" \"} {moment(end).format(\"LL\")}.\n    </p>\n\n    <div>\n      {    \n      repos.forEach(repo => {\n        gatherData(repo, start, end, token).then(res => {\n            console.log(res)\n            displayData(res);     \n        });\n    })\n    }\n    </div>\n\n  </div>)\n  \n  }\n\n  \n  async function getClosedPullRequestInformation(repo, start, end, token) {\n    const response = await fetch(`https://api.github.com/search/issues?q=repo:nationwide-building-society/${repo}+is:pr+closed:${start}..${end}&per_page=100`, {\n        method: \"GET\",\n        headers: {\n            Authorization: `token ${token}`\n        }\n    });\n    const result = await response.json().then(result => {return result});\n\n    return result;\n}\n\n    async function getCreatedPullRequestInformation(repo, start, end, token) {\n        const response = await fetch(`https://api.github.com/search/issues?q=repo:nationwide-building-society/${repo}+is:pr+created:${start}..${end}&per_page=100`, {\n            method: \"GET\",\n            headers: {\n                Authorization: `token ${token}`\n            }\n        });\n\n        const result = await response.json().then(result => {return result});\n\n        return result;\n    }\n\nfunction getDifference(created, closed){\n        const createDate = new Date(created);\n        const closedDate = new Date(closed);\n        const diffTime = Math.abs(closedDate - createDate);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); \n\n        return diffDays;\n    }\n\nfunction calculateAverage(array) {\n    var total = 0;\n    var count = 0;\n\n    array.forEach(function(item, index){\n        total += item;\n        count++;\n    });\n\n    var result = total/count;\n\n\n    return result.toFixed(2);\n}    \n\nfunction getAverageOpenTime(pullRequests){\n    var newArr = [];\n    pullRequests.forEach(pr => {\n        var daysOpen = getDifference(pr.created_at, pr.closed_at);\n        newArr.push(daysOpen);\n    });\n    \n    return calculateAverage(newArr);\n}    \n\nfunction getClosedPRsNoMerge(pullRequests){\n    var noMergeCount = 0;\n    pullRequests.forEach(pr => {\n        if (pr.pull_request.merged_at === null){\n            noMergeCount++;\n        }\n    });\n\n    return noMergeCount;\n}\n\nasync function gatherData(repo, start, end, token){\n    var closedInfo = await getClosedPullRequestInformation(repo, start, end, token);\n    var createdInfo = await getCreatedPullRequestInformation(repo, start, end, token);\n\n    var averageOpenTime = getAverageOpenTime(closedInfo.items);\n    var closedNoMerge = getClosedPRsNoMerge(closedInfo.items);\n\n   //accumulate data and put into custom data object to return and display\n   var arr = {\n       name: repo, \n       createdInfo: createdInfo, \n       closedInfo: closedInfo, \n       averageOpenTime: `${averageOpenTime} ${+ averageOpenTime == 1 ? 'day' : 'days'}`,\n       closedNoMerge: closedNoMerge\n    }\n   \n   return arr;\n}\n\nasync function displayData(data) {\n        \n  let title = document.getElementById('active_pr_title');\n  title.innerText = `Pull Request Activity from ${startDate} to ${endDate}`;\n\n  let div = document.getElementById('reposData');\n  let header = document.createElement('h3');\n  header.classList.add('text-center');\n  header.classList.add('mt-5');\n  header.innerText = data.name;\n  div.appendChild(header);\n\n  let ul = document.createElement('ul');\n  document.body.appendChild(ul);\n  ul.setAttribute(\"id\", data.name + \"-prs\")\n\n  let closeNumber = document.createElement('li');\n  closeNumber.classList.add('text-center', 'list-group-item');\n  closeNumber.innerText = `Number closed between ${startDate} and ${endDate} : ${data.closedInfo.total_count}`;\n  ul.appendChild(closeNumber);\n  \n  let createdNumber = document.createElement('li');\n  createdNumber.classList.add('text-center', 'list-group-item');\n  createdNumber.innerText = `Number created between ${startDate} and ${endDate} : ${data.createdInfo.total_count}`;\n  ul.appendChild(createdNumber);\n  \n  //Average days open for pull requests\n  let averageOpenTime = document.createElement('li');\n  averageOpenTime.classList.add('text-center', 'list-group-item');\n  averageOpenTime.innerText = `Average PR wait time (in open state) : ${data.averageOpenTime}`;\n  ul.appendChild(averageOpenTime);\n\n  //PRs closed without merge\n  let closedNoMerge = document.createElement('li');\n  closedNoMerge.classList.add('text-center', 'list-group-item');\n  closedNoMerge.innerText = `PRs closed without merge : ${data.closedNoMerge}`;\n  ul.appendChild(closedNoMerge);\n\n  div.appendChild(ul);\n}\n  \n  \n  \n  \n  \n  \n  export default Display;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/Caleb.Hoffman/Desktop/training/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";//Passing in an array of repos, start and end date\n//Rendering each FetchPullRequestData component\nimport React from\"react\";import Stack from'react-bootstrap/Stack';import FetchSpecificPullRequest from\"./FetchSpecificPullRequest\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var FetchOpenPullRequestData=/*#__PURE__*/function(_React$Component){_inherits(FetchOpenPullRequestData,_React$Component);var _super=_createSuper(FetchOpenPullRequestData);function FetchOpenPullRequestData(){var _this;_classCallCheck(this,FetchOpenPullRequestData);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,repo:null,prNumbers:null,prInfo:null};return _this;}_createClass(FetchOpenPullRequestData,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,response,data,openPullRequests;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://api.github.com/repos/nationwide-building-society/\".concat(this.props.repo,\"/pulls?state=open&per_page=100\");_context2.next=3;return fetch(url,{method:\"GET\",headers:{Authorization:\"token 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\"}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;openPullRequests=[];data.forEach(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pr){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return openPullRequests.push(pr.number);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());_context2.t0=this;_context2.t1=this.props.repo;_context2.next=13;return openPullRequests;case 13:_context2.t2=_context2.sent;_context2.t3={repo:_context2.t1,prNumbers:_context2.t2,loading:false};_context2.t0.setState.call(_context2.t0,_context2.t3);case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return(//For each pr number in array, display pr info\n!this.state.loading&&this.state.prNumbers!=null?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[this.state.repo,\" (\",this.state.prNumbers.length,\")\"]}),this.state.prNumbers.map(function(mapping){return/*#__PURE__*/_jsx(FetchSpecificPullRequest,{repo:_this2.state.repo,prNumber:mapping});})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\\"Loading\\\"\"}));}}]);return FetchOpenPullRequestData;}(React.Component);export{FetchOpenPullRequestData as default};","map":{"version":3,"names":["React","Stack","FetchSpecificPullRequest","FetchOpenPullRequestData","state","loading","repo","prNumbers","prInfo","url","props","fetch","method","headers","Authorization","response","json","data","openPullRequests","forEach","pr","push","number","setState","length","map","mapping","Component"],"sources":["/Users/Caleb.Hoffman/Desktop/training/my-app/src/FetchOpenPullRequestData.js"],"sourcesContent":["//Passing in an array of repos, start and end date\n\n//Rendering each FetchPullRequestData component\n\n\nimport React from \"react\";\nimport Stack from 'react-bootstrap/Stack'\nimport FetchSpecificPullRequest from \"./FetchSpecificPullRequest\";\n\nexport default class FetchOpenPullRequestData extends React.Component {\n    state = {\n        loading : true,\n        repo: null,\n        prNumbers: null,\n        prInfo: null\n    };\n\n    \n\n    async componentDidMount(){\n        const url = `https://api.github.com/repos/nationwide-building-society/${this.props.repo}/pulls?state=open&per_page=100`;\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                Authorization: `token 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`\n            }\n        });\n        const data = await response.json();        \n        const openPullRequests = [];\n\n\n        data.forEach(async pr => {\n            await openPullRequests.push(pr.number);    \n        });\n        \n        this.setState({\n            repo: this.props.repo,\n            prNumbers: await openPullRequests,\n            loading :false\n        })\n\n    }\n\n    render(){\n\n        return (\n            \n            //For each pr number in array, display pr info\n            !this.state.loading && this.state.prNumbers != null ? (\n           \n            <div>\n                <h2>{this.state.repo} ({this.state.prNumbers.length})</h2>\n                {\n                this.state.prNumbers.map(mapping => (\n                    <FetchSpecificPullRequest repo={this.state.repo} prNumber={mapping}/>\n                ))\n               }\n            </div>\n \n            ) : (<p>\"Loading\"</p>)  \n        )\n\n    }\n\n}"],"mappings":"4wBAAA;AAEA;AAGA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,uBAAlB,CACA,MAAOC,yBAAP,KAAqC,4BAArC,C,2FAEqBC,yB,+YACjBC,K,CAAQ,CACJC,OAAO,CAAG,IADN,CAEJC,IAAI,CAAE,IAFF,CAGJC,SAAS,CAAE,IAHP,CAIJC,MAAM,CAAE,IAJJ,C,iLASR,iLACUC,GADV,oEAC4E,KAAKC,KAAL,CAAWJ,IADvF,0DAE2BK,MAAK,CAACF,GAAD,CAAM,CAC9BG,MAAM,CAAE,KADsB,CAE9BC,OAAO,CAAE,CACLC,aAAa,iDADR,CAFqB,CAAN,CAFhC,QAEUC,QAFV,uCAQuBA,SAAQ,CAACC,IAAT,EARvB,QAQUC,IARV,gBASUC,gBATV,CAS6B,EAT7B,CAYID,IAAI,CAACE,OAAL,4FAAa,iBAAMC,EAAN,0IACHF,iBAAgB,CAACG,IAAjB,CAAsBD,EAAE,CAACE,MAAzB,CADG,uDAAb,gEAZJ,aAgBI,IAhBJ,cAiBc,KAAKZ,KAAL,CAAWJ,IAjBzB,yBAkByBY,iBAlBzB,mDAiBQZ,IAjBR,cAkBQC,SAlBR,cAmBQF,OAnBR,CAmBiB,KAnBjB,eAgBSkB,QAhBT,+F,mIAwBA,iBAAQ,iBAEJ,MAEI;AACA,CAAC,KAAKnB,KAAL,CAAWC,OAAZ,EAAuB,KAAKD,KAAL,CAAWG,SAAX,EAAwB,IAA/C,cAEA,oCACI,sBAAK,KAAKH,KAAL,CAAWE,IAAhB,MAAwB,KAAKF,KAAL,CAAWG,SAAX,CAAqBiB,MAA7C,OADJ,CAGI,KAAKpB,KAAL,CAAWG,SAAX,CAAqBkB,GAArB,CAAyB,SAAAC,OAAO,qBAC5B,KAAC,wBAAD,EAA0B,IAAI,CAAE,MAAI,CAACtB,KAAL,CAAWE,IAA3C,CAAiD,QAAQ,CAAEoB,OAA3D,EAD4B,EAAhC,CAHJ,GAFA,cAWK,kCAdT,EAiBH,C,sCArDiD1B,KAAK,CAAC2B,S,SAAvCxB,wB"},"metadata":{},"sourceType":"module"}